# To be done: 
Nginx-ingress: DONE 
Prometheus: Done
SSL: Done 
Session Affinity
# Start
kubectl apply -f .\A-localhost\


# Nginx-Ingress 

helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx

helm repo update

kubectl create ns web

helm install nginx-ingress ingress-nginx/ingress-nginx --namespace web --set controller.replicaCount=2

helm uninstall nginx-ingress ingress-nginx/ingress-nginx --namespace web 
# Prometheus

Source: https://github.com/prometheus-operator/kube-prometheus/tree/main/manifests/

cd '.\B- prometheus\'

kubectl apply --server-side -f manifests/setup

kubectl wait --for condition=Established --all CustomResourceDefinition --namespace=monitoring

kubectl apply -f manifests/


``` Fix for dockerdesktop: ```
kubectl patch ds prometheus-prometheus-node-exporter -n web --type "json" -p '[{"op": "remove", "path" : "/spec/template/spec/containers/0/volumeMounts/2/mountPropagation"}]'
```		NOTE				```
user/password = admin/admin

kubectl get secret --namespace monitoring grafana -o yaml
echo “password_value” | openssl base64 -d ; echo







#############################################################################################
chouf baed
#############################################################################################
# Kubernetes Metrics Server
I downloaded this config 
https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml

then added a line 
        - --kubelet-insecure-tls

to test if its working 
kubectl top pods -n web

kubectl top nodes -n web

kubectl apply -f dep-metrics-server.yaml 